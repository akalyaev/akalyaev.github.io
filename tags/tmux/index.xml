<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tmux on Home on Rails</title>
    <link>http://homeonrails.com/tags/tmux/index.xml</link>
    <description>Recent content in Tmux on Home on Rails</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>All rights reserved - 2017</copyright>
    <atom:link href="http://homeonrails.com/tags/tmux/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>TrueColor in Gnome Terminal, Tmux and Neovim</title>
      <link>http://homeonrails.com/2016/05/truecolor-in-gnome-terminal-tmux-and-neovim/</link>
      <pubDate>Wed, 04 May 2016 11:41:10 +0000</pubDate>
      
      <guid>http://homeonrails.com/2016/05/truecolor-in-gnome-terminal-tmux-and-neovim/</guid>
      <description>&lt;p&gt;Here is where we are right now: &lt;a href=&#34;https://gist.github.com/XVilka/8346728&#34;&gt;https://gist.github.com/XVilka/8346728&lt;/a&gt; . As you
can see, most of the editors and terminals now support TrueColor (16 million
colors).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The result&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Difference between TrueColor (24bits - 16 million colors) and &amp;ldquo;256colors&amp;rdquo; (8bits - 256 colors):&lt;/p&gt;

&lt;p&gt;&lt;img class=&#34;img-rounded&#34; src=&#34;http://homeonrails.com/images/posts/2016-05-05-truecolor-in-gnome-terminal-tmux-and-neovim/diff1.png&#34; alt=&#34;&#34; width=&#34;100%&#34; title=&#34;&#34;/&gt;&lt;/p&gt;

&lt;p&gt;Original theme (&lt;a href=&#34;https://github.com/morhetz/gruvbox&#34;&gt;gruvbox&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;&lt;img class=&#34;img-rounded&#34; src=&#34;http://homeonrails.com/images/posts/2016-05-05-truecolor-in-gnome-terminal-tmux-and-neovim/orig.png&#34; alt=&#34;&#34; width=&#34;100%&#34; title=&#34;&#34;/&gt;&lt;/p&gt;

&lt;p&gt;TrueColor looks better and comfier for your eyes. So, there is no excuse not to use it.&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;h2 id=&#34;gnome-terminal&#34;&gt;Gnome Terminal&lt;/h2&gt;

&lt;p&gt;gnome-terminal has to be in version linked against &lt;code&gt;libvte &amp;gt;= 0.36&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;1) Check&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ldd /usr/lib/gnome-terminal/gnome-terminal-server | grep libvte
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2) Install&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo add-apt-repository ppa:gnome3-team/gnome3-staging
sudo apt-get update
sudo apt-get install -y gnome-terminal
sudo add-apt-repository -r ppa:gnome3-team/gnome3-staging
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;3) Restart gnome-terminal-server (I&amp;rsquo;ve just rebooted my machine, but killing the corresponding process should also do the job).&lt;/p&gt;

&lt;p&gt;Links:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://askubuntu.com/questions/512525/how-to-enable-24bit-true-color-support-in-gnome-terminal&#34;&gt;https://askubuntu.com/questions/512525/how-to-enable-24bit-true-color-support-in-gnome-terminal&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;tmux&#34;&gt;Tmux&lt;/h2&gt;

&lt;p&gt;tmux must be &lt;code&gt;&amp;gt;= 2.2&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;1) Check&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmux -V
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2) Kill tmux (&lt;code&gt;tmux kill-server&lt;/code&gt;) and (optionally) remove it&lt;/p&gt;

&lt;p&gt;3) Install&lt;/p&gt;

&lt;p&gt;On Ubuntu:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get install -y libevent-dev libncurses-dev build-essential
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;wget https://github.com/tmux/tmux/releases/download/2.2/tmux-2.2.tar.gz &amp;amp;&amp;amp; \
  tar -xzvf tmux-2.2.tar.gz &amp;amp;&amp;amp; \
  cd tmux-2.2 &amp;amp;&amp;amp; \
  ./configure &amp;amp;&amp;amp; \
  make &amp;amp;&amp;amp; \
  sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;4) Alias tmux or set $TERM env variable&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;alias tmux=&amp;quot;env TERM=xterm-256color tmux&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;5) Set option, which overrides default terminal&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# .tmux.conf
set-option -ga terminal-overrides &amp;quot;,xterm-256color:Tc&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;6) Check (inside tmux)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tmux info | grep Tc
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If the command reports Tc: [missing], then support for 24-bit colors has not been enabled properly because the terminal-overrides option may have specified the outer terminal’s $TERM value incorrectly or because tmux may have been reattached to an entirely different outer terminal altogether.&lt;/p&gt;

&lt;p&gt;Links:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/tmux/tmux&#34;&gt;https://github.com/tmux/tmux&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://sunaku.github.io/tmux-24bit-color.html#usage&#34;&gt;https://sunaku.github.io/tmux-24bit-color.html#usage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;neovim&#34;&gt;Neovim&lt;/h2&gt;

&lt;p&gt;1) Set env variable&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-vim&#34;&gt;&amp;quot; .nvimrc
let $NVIM_TUI_ENABLE_TRUE_COLOR=1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;2) Pick a theme, which does not force 256 colors &lt;code&gt;if !has(&#39;gui_running&#39;)&lt;/code&gt; or checks for &lt;code&gt;neovim&lt;/code&gt; (&lt;a href=&#34;https://github.com/neovim/neovim/issues/793&#34;&gt;discussion&lt;/a&gt;):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/frankier/neovim-colors-solarized-truecolor-only&#34;&gt;solarized fork&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/morhetz/gruvbox&#34;&gt;gruvbox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/neovim/neovim/issues/793#issuecomment-59628883&#34;&gt;https://github.com/neovim/neovim/issues/793#issuecomment-59628883&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Links:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://chris.chowie.net/2015/04/19/True-colour-with-neovim-tmux-and-iterm2/&#34;&gt;https://chris.chowie.net/2015/04/19/True-colour-with-neovim-tmux-and-iterm2/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My dotfiles: &lt;a href=&#34;https://github.com/akalyaev/dotfiles&#34;&gt;https://github.com/akalyaev/dotfiles&lt;/a&gt;&lt;/p&gt;</description>
    </item>
    
    <item>
      <title>tmux / Автоматическое восстановление сессии</title>
      <link>http://homeonrails.com/2015/07/tmux-slash-avtomatichieskoie-vosstanovlieniie-siessii/</link>
      <pubDate>Fri, 17 Jul 2015 10:35:07 +0000</pubDate>
      
      <guid>http://homeonrails.com/2015/07/tmux-slash-avtomatichieskoie-vosstanovlieniie-siessii/</guid>
      <description>&lt;p&gt;Не так давно собрался с силами, и настроил у себя в tmux автоматическое
сохранение и восстановление последней сессии. По прошествии месяца могу с
уверенностью сказать - просто бомба!&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;&lt;img class=&#34;img-rounded&#34; src=&#34;http://homeonrails.com/images/posts/2015-07-17-tmux-slash-avtomatichieskoie-vosstanovlieniie-siessii/ILKC62E3GC.jpg&#34; alt=&#34;&#34;/ width=&#34;694&#34; title=&#34;tmux / Автоматическое восстановление сессии&#34;&gt;&lt;/p&gt;

&lt;p&gt;Представьте себе, вы выключили компьютер (не все так поступают, я знаю) и
отправились домой. Вечером, отправив жену готовить борщ, и удобно устроившись
на любимом диване, предварительно включив теплый ламповый свет, вы открываете
свой лэптоп, запускаете shell и вуаля - &lt;strong&gt;все сплиты на том же самом месте, где
они и были в последний раз. Более того, Vim уже запущен и курсор стоит на той
же строке, где он и был в последний раз&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Для того, чтобы данное чудо заработало и у вас, нам потребуется &lt;a href=&#34;https://github.com/tmux-plugins/tpm&#34;&gt;Tmux Plugin
Manager&lt;/a&gt; (сокращенно, tpm):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;(примечание: нужен tmux &amp;gt;= 1.9)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Теперь добавим следующее в конец .tmux.conf:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# .tmux.conf

set -g @plugin &#39;tmux-plugins/tpm&#39;
set -g @plugin &#39;tmux-plugins/tmux-sensible&#39;
set -g @plugin &#39;tmux-plugins/tmux-resurrect&#39;
set -g @plugin &#39;tmux-plugins/tmux-continuum&#39;

run &#39;~/.tmux/plugins/tpm/tpm&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Далее остается только загрузить наши изменения и установить плагины:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ tmux source ~/.tmux.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Для установки плагинов нажмите &lt;code&gt;prefix - I&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Для комфортной работы стоит добавить пару опций. По умолчанию, tmux-continuum
(плагин, который автоматически сохраняет tmux окружение) не восстанавливает его
при запуске tmux. Что ж, исправим это недоразумение:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# .tmux.conf

set -g @continuum-restore &#39;on&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Для того, чтобы при загрузке восстанавливались Vim (Neovim) сессии, нужно&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;установить плагин &lt;a href=&#34;https://github.com/tpope/vim-obsession&#34;&gt;https://github.com/tpope/vim-obsession&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;добавить пару строк в .tmux.conf:&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;# .tmux.conf

# for vim
set -g @resurrect-strategy-vim &#39;session&#39;
# for neovim
set -g @resurrect-strategy-nvim &#39;session&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Стоит отметить, что можно стартовать не только Vim, но и любые другие программы
- ssh, psql, rails console, которые были запущены в прошлый раз. Для этого,
  правда, надо добавить их в конфиг:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# .tmux.conf

set -g @resurrect-processes &#39;ssh psql mysql sqlite3&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Также у данного плагина (&lt;a href=&#34;https://github.com/tmux-plugins/tmux-resurrect&#34;&gt;https://github.com/tmux-plugins/tmux-resurrect&lt;/a&gt;) есть и
несколько интересных экспериментальный опций, таких как сохранение истории для
каждого сплита и сохранение его содержимого.&lt;/p&gt;</description>
    </item>
    
  </channel>
</rss>